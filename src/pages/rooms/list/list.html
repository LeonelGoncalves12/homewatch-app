<!--
  Generated template for the ListPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>

  <ion-navbar>
    <ion-title>{{roomsLabel}}</ion-title>
  </ion-navbar>

</ion-header>


<ion-content
  [ngClass]="{ 'homepage': theme == 'default', 'homepageRedTheme': theme=='red' , 'homepageGreenTheme': theme=='green' }">
  <div class='content space' style="height: 100%">
    <div *ngIf="loading" class="loadingContainter">
      <img class="loadingElement" src="./assets/loadingGif.svg">
    </div>
    <div *ngIf="!loading" style="height: 100%">
      <div *ngIf="failed" class="containerCenter">
        <div class="text childCenter">
          <div class="text" style="margin:0;font-size: 2vh">
            {{somethingFailedLabel}}
          </div>
          <div class="text " style="margin-top: 2vh">
            <button class='seeall oversize'
                    [ngClass]="{ 'seeallDefaultTheme': theme == 'default', 'seeallRedTheme': theme=='red' , 'seeallGreenTheme': theme=='green' }"
                    (click)="tryAgain()" style="float: none">Try Again
            </button>
          </div>
        </div>
      </div>
      <div *ngIf="!failed">
        <div *ngIf="rooms.length == 0" class="containerCenter">
          <div class="text childCenter">
            <div class="text" style="margin:0;font-size: 2vh">
              You don't have Rooms in this home.
            </div>
            <div class="text " style="margin:0;font-size: 2vh">
              Add one right now.
            </div>
            <div class="text " style="margin-top: 2vh">
              <button class='seeall oversize'
                      [ngClass]="{ 'seeallDefaultTheme': theme == 'default', 'seeallRedTheme': theme=='red' , 'seeallGreenTheme': theme=='green' }"
                      (click)="newRoom(home)" style="float: none"> {{addRoomLabel}}
              </button>
            </div>
          </div>
        </div>
        <div *ngIf="rooms.length > 0">
          <ion-row class="full">
            <div class="centertitle" style="margin-top: 3vh;">
              <h1>{{roomsLabel}}</h1>
            </div>
            <button style="float: right;position: absolute; right: 5%;" class='seeall oversize'
                    [ngClass]="{ 'seeallDefaultTheme': theme == 'default', 'seeallRedTheme': theme=='red' , 'seeallGreenTheme': theme=='green' }"
                    (click)="newRoom(home)">
              {{addRoomLabel}}
            </button>
          </ion-row>

          <div class="div-slides " style="margin-top: 1vh;">
            <ion-slides slidesPerView="3" spaceBetween="1" class="lineborders"
                        [ngClass]="{ 'slides': theme == 'default',  'slidesRedTheme': theme=='red' , 'slidesGreenTheme': theme=='green' }">
              <ion-slide *ngFor="let room of rooms" ion-long-press [interval]="500" (onPressing)="editRoom(home,room)">
                <ion-row class="roomicon" (click)="chooseRoom(room)">
                  <div class="centertitle">
                    <img *ngIf="room.icon == 1" src="./assets/kitchen2.png"
                         [ngClass]="[ roomIndex == room.id ? theme == 'default' ? 'active_slideColumn' : theme == 'red' ? 'active_slideColumnRedTheme' :   theme == 'green' ? 'active_slideColumnGreenTheme' : '' : roomIndex != room.id ? theme == 'default' ? 'slideColumn' : theme == 'red' ? 'slideColumnRedTheme' :   theme == 'green' ? 'slideColumnGreenTheme' : '' :'']">
                    <img *ngIf="room.icon == 2" src="./assets/bedroom-icon.png"
                         [ngClass]="[ roomIndex == room.id ? theme == 'default' ? 'active_slideColumn' : theme == 'red' ? 'active_slideColumnRedTheme' :   theme == 'green' ? 'active_slideColumnGreenTheme' : '' : roomIndex != room.id ? theme == 'default' ? 'slideColumn' : theme == 'red' ? 'slideColumnRedTheme' :   theme == 'green' ? 'slideColumnGreenTheme' : '' :'']">
                    <img *ngIf="room.icon == 3"
                         src="./assets/Bathroom_Objects_-_Ultra_Color_-_002_-_Toilet_Side-512.png"
                         [ngClass]="[ roomIndex == room.id ? theme == 'default' ? 'active_slideColumn' : theme == 'red' ? 'active_slideColumnRedTheme' :   theme == 'green' ? 'active_slideColumnGreenTheme' : '' : roomIndex != room.id ? theme == 'default' ? 'slideColumn' : theme == 'red' ? 'slideColumnRedTheme' :   theme == 'green' ? 'slideColumnGreenTheme' : '' :'']">
                    <img *ngIf="room.icon == 4" src="./assets/livingRoomIcon.png"
                         [ngClass]="[ roomIndex == room.id ? theme == 'default' ? 'active_slideColumn' : theme == 'red' ? 'active_slideColumnRedTheme' :   theme == 'green' ? 'active_slideColumnGreenTheme' : '' : roomIndex != room.id ? theme == 'default' ? 'slideColumn' : theme == 'red' ? 'slideColumnRedTheme' :   theme == 'green' ? 'slideColumnGreenTheme' : '' :'']">
                    <img *ngIf="room.icon == 5" src="./assets/dinnerRoomIcon.png"
                         [ngClass]="[ roomIndex == room.id ? theme == 'default' ? 'active_slideColumn' : theme == 'red' ? 'active_slideColumnRedTheme' :   theme == 'green' ? 'active_slideColumnGreenTheme' : '' : roomIndex != room.id ? theme == 'default' ? 'slideColumn' : theme == 'red' ? 'slideColumnRedTheme' :   theme == 'green' ? 'slideColumnGreenTheme' : '' :'']">
                    <img *ngIf="room.icon == 6" src="./assets/garageIcon.png"
                         [ngClass]="[ roomIndex == room.id ? theme == 'default' ? 'active_slideColumn' : theme == 'red' ? 'active_slideColumnRedTheme' :   theme == 'green' ? 'active_slideColumnGreenTheme' : '' : roomIndex != room.id ? theme == 'default' ? 'slideColumn' : theme == 'red' ? 'slideColumnRedTheme' :   theme == 'green' ? 'slideColumnGreenTheme' : '' :'']">
                    <img *ngIf="room.icon == 7" src="./assets/garden.png"
                         [ngClass]="[ roomIndex == room.id ? theme == 'default' ? 'active_slideColumn' : theme == 'red' ? 'active_slideColumnRedTheme' :   theme == 'green' ? 'active_slideColumnGreenTheme' : '' : roomIndex != room.id ? theme == 'default' ? 'slideColumn' : theme == 'red' ? 'slideColumnRedTheme' :   theme == 'green' ? 'slideColumnGreenTheme' : '' :'']">
                  </div>
                </ion-row>
                <ion-row  class="centertitle text margin1vh">
                  <div class="centertitle">
                    {{room.name}}
                  </div>
                </ion-row>
              </ion-slide>
            </ion-slides>
          </div>
          <ion-row class="full">
            <div class="centertitle" style="margin-top: 9vh;">
              <h1>{{roomDevicesLabel}}</h1>
            </div>
            <button *ngIf="roomThings.length > 0" style=" float: right;position: absolute; right: 5%;"
                    class='seeall oversize'
                    [ngClass]="{ 'seeallDefaultTheme': theme == 'default', 'seeallRedTheme': theme=='red' , 'seeallGreenTheme': theme=='green' }"
                    (click)="newDevice(room)">{{addDeviceLabel}}
            </button>

          </ion-row>
          <div *ngIf="room" class="underSlides">
            <div *ngIf="loadingThings" style="height: 100%">
              <img class="loadingElement" src="./assets/loadingGif.svg">
            </div>
            <div *ngIf="!loadingThings" style="height: 100%">
              <div *ngIf="roomThings.length == 0" class="containerCenter" style="margin-top: 4vh">
                <div class="text childCenter">
                  <div class="text" style="margin:0;font-size: 2vh">
                    You have no things in the rooms
                  </div>
                  <div class="text " style="margin:0;font-size: 2vh">
                    Add one right now.
                  </div>
                  <div class="text " style="margin-top: 2vh">
                    <button class='seeall oversize'
                            [ngClass]="{ 'seeallDefaultTheme': theme == 'default', 'seeallRedTheme': theme=='red' , 'seeallGreenTheme': theme=='green' }"
                            (click)="newDevice(room)" style="float: none">{{addDeviceLabel}}
                    </button>
                  </div>
                </div>
              </div>


              <div *ngIf="roomThings.length > 0">
                <ng-container *ngFor=" let thing of roomThings; ">
                  <ion-row *ngIf="room.id === thing.room.id" class="full2 " style="margin-top: 1vh"
                           [ngClass]="{ 'module': theme == 'default',  'moduleRedTheme': theme=='red' , 'moduleGreenTheme': theme=='green' }"
                           (click)="editDevice(thing, room)">
                    <ion-col col-3 class="roomicon">
                      <div *ngIf="thing.type === 'Things::Light'">
                        <img src="./assets/Light_color.png" class="slideColumnHomes"
                             [ngClass]="[ thing.status == null ? 'slideColumnNULL' :  thing.status.on === true ? 'slideColumnON' : 'slideColumnOFF']">
                      </div>
                      <div *ngIf="thing.type === 'Things::Lock'">
                        <img src="./assets/Lock.ico" class="slideColumnHomes"
                             [ngClass]="[ thing.status == null ? 'slideColumnNULL' :  thing.status.locked === true ? 'slideColumnON' : 'slideColumnOFF']">
                      </div>
                      <div *ngIf="thing.type === 'Things::Thermostat'">
                        <img src="./assets/thermostat_icon.png" class="slideColumnHomes">
                      </div>
                      <div *ngIf="thing.type === 'Things::MotionSensor'">
                        <img src="./assets/motion_sensor.png" class="slideColumnHomes">
                      </div>
                      <div *ngIf="thing.type === 'Things::Weather'">
                        <img src="./assets/weather-icon-png-11063.png" class="slideColumnHomes">
                      </div>
                    </ion-col>
                    <ion-col col-9 class="centertitle text" style="text-align: left">
                      {{thing.name}}
                    </ion-col>
                  </ion-row>
                </ng-container>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</ion-content>
